<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/itu-bds-sdse/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/itu-bds-sdse/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/itu-bds-sdse/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/itu-bds-sdse/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/itu-bds-sdse/images/favicon.ico"/><title>Merging – Data Science in Production: MLOps and Software Engineering</title><meta name="description" content="Basics of Git."/><meta name="keywords" content="Software engineering,Git"/><meta name="og:description" content="Basics of Git."/><meta name="og:title" content="Merging – Data Science in Production: MLOps and Software Engineering"/><meta name="og:image" content="/itu-bds-sdse/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/itu-bds-sdse/_next/static/css/aaf20f4dad916972.css" as="style"/><link rel="stylesheet" href="/itu-bds-sdse/_next/static/css/aaf20f4dad916972.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/itu-bds-sdse/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/itu-bds-sdse/_next/static/chunks/webpack-8116fd4d628798fe.js" defer=""></script><script src="/itu-bds-sdse/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/itu-bds-sdse/_next/static/chunks/main-348f16897b94a0d5.js" defer=""></script><script src="/itu-bds-sdse/_next/static/chunks/pages/_app-fa68bd1b4993f298.js" defer=""></script><script src="/itu-bds-sdse/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-c2cb604784d7e04f.js" defer=""></script><script src="/itu-bds-sdse/_next/static/2uTetOH5G6p8P6C8WtCZW/_buildManifest.js" defer=""></script><script src="/itu-bds-sdse/_next/static/2uTetOH5G6p8P6C8WtCZW/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/itu-bds-sdse">Data Science in Production: MLOps and Software Engineering</a></h1><div class="navbar-info"></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><h2>Merging changes</h2>
<p>What we have done so far is to create a new <code>feature</code> branch based on <code>main</code>, switch to the <code>feature</code>branch, make some new changes and commit them.</p>
</br>

<p>Now we want to switch back to the <code>main</code> branch and add some new changes there.</p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Exercise: Switch to the <code>main</code> branch and make some changes</h3>
<blockquote>
<ul>
<li>Switch to the <code>main</code> branch.</li>
<li>Add <code>D</code>and <code>E</code> to the <code>README.md</code> file the same way as we just added <code>B</code> and <code>C</code> to the <code>document.md</code> file.</li>
</ul>
</blockquote>
</br>

<p><strong>Command reminder:</strong></p>
<pre><code class="hljs language-bash">git switch &lt;branch-name&gt;  <span class="hljs-comment"># to switch to a branch</span>
git status                <span class="hljs-comment"># to see the status of the working directory</span>
git add &lt;file-name&gt;       <span class="hljs-comment"># to add a file to the staging area</span>
git commit -m <span class="hljs-string">&quot;&lt;message&gt;&quot;</span> <span class="hljs-comment"># to commit the changes</span>
</code></pre></br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Solution: Switch to the <code>main</code> branch and make some changes</h3>
<pre><code class="hljs language-bash">git switch main

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;D&quot;</span> &gt;&gt; README.md
git add README.md
git commit -m <span class="hljs-string">&quot;D&quot;</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;E&quot;</span> &gt;&gt; README.md
git add README.md
git commit -m <span class="hljs-string">&quot;E&quot;</span>
</code></pre></br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<p>If we run <code>git log</code> we should see something like this:</p>
<pre><code class="hljs language-plaintext">commit 1fef21501625d1cb1ab99318ad0fa8487d6ef5cb (HEAD -&gt; main)
Author: Lasse Lund Sten Jensen &lt;lajl@itu.dk&gt;
Date:   Fri Sep 20 22:27:19 2024 +0200

    E

commit 8ae69da5d2938a5fee06207f2c3320a4c5b90a9b
Author: Lasse Lund Sten Jensen &lt;lajl@itu.dk&gt;
Date:   Fri Sep 20 22:27:06 2024 +0200

    D

commit 16b8f7f933c4c92b83ebb8602109c84c2d799359
Author: Lasse Lund Sten Jensen &lt;lajl@itu.dk&gt;
Date:   Fri Sep 20 21:48:09 2024 +0200

    A
</code></pre></br>

<p>We can see that <code>D</code>, <code>E</code>, and <code>A</code> are all on the <code>main</code> branch.</p>
<p>The branches now look like this:</p>
<p><img src="../../images/lessons/git/branch-a-b-c-d-e.svg" alt="Branch feature"></p>
</br>

<p>This means the <em>branches have diverged</em>.</p>
<p>They have commits that are unique in both and they have a common ancestor <code>A</code>.</p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h2>Git merge</h2>
<p>When we have two branches that have diverged, we can merge them back together.</p>
</br>
</br>

<p>When merging we can have two different outcomes—one with a merge commit and one without. Strategy for merging matters here.</p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>What is a merge exactly?</h3>
<p>A merge is a way to combine the changes from one branch into another branch. Essentially combining two histories together that have diverged somewhere in the past.</p>
<p>As in our example, where <code>main</code> and <code>feature</code> have diverged from a shared commit <code>A</code>. Here <code>A</code> is the <em><strong>first</strong> common ancestor</em>. This is also called the <strong>merge base</strong>.</p>
</br>

<p>When we merge, <strong>git</strong> </p>
<ul>
<li>walks the history of the two branches,</li>
<li>finds the merge base, </li>
<li>checks out the merge base</li>
<li>and <em>&quot;plays&quot; those commits</em> on top of it,</li>
<li>and then creates a new commit with the changes from both branches called the <em><strong>merge commit</strong></em>.</li>
</ul>
<p>A <em>merge commit</em> has <em>two parents</em>. One from the branch we are merging from and one from the branch we are merging to.</p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h2>Merge</h2>
<p>We have the <code>merge</code> command.</p>
</br>

<p>The branch we are on (i.e. has checked out, with the <code>*</code>) is the branch we are merging into, also called the <code>target</code> branch. The branch in <code>&lt;branch-name&gt;</code> will be the <code>source</code> branch.</p>
</br>
</br>

<p><strong>Command</strong></p>
<pre><code class="hljs language-bash">git merge &lt;branch-name&gt;
</code></pre><blockquote>
<p>Read more about it in the manual: <code>man git-merge</code></p>
</blockquote>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<p>To merge the <code>feature</code> branch into the <code>main</code> branch, we can use the <code>merge</code> command.</p>
<p>However, since we will be using this to demonstrate another merge technique, let us first checkout a copy of the <code>main</code> branch, so we do not mess up our history.</p>
<p>We call it <code>main-merge-feature</code>.</p>
</br>

<pre><code class="hljs language-bash">git checkout -b main-merge-feature
</code></pre></br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Exercise: Merge the <code>feature</code> branch into the <code>main-merge-feature</code> branch using the <code>merge</code> command</h3>
<blockquote>
<ul>
<li>Switch to the <code>main-merge-feature</code> branch, if you are not already on it.</li>
<li>Merge the <code>feature</code> branch into the <code>main-merge-feature</code> branch.</li>
<li>Check the log to see the result.</li>
<li>(Extra) Use the <code>--parents</code> flag to see the parents of the merge commit.</li>
</ul>
</blockquote>
<p><strong>Command reminder:</strong></p>
<pre><code class="hljs language-bash">git switch &lt;branch-name&gt;  <span class="hljs-comment"># to switch to a branch</span>
git merge &lt;branch-name&gt;   <span class="hljs-comment"># to merge a branch into the current branch</span>
git <span class="hljs-built_in">log</span>                   <span class="hljs-comment"># to see the logs</span>
</code></pre></br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Solution: Merge the <code>feature</code> branch into the <code>main-merge-feature</code> branch using the <code>merge</code> command</h3>
<pre><code class="hljs language-bash">git switch main-merge-feature <span class="hljs-comment"># switch to the target branch</span>
git merge feature             <span class="hljs-comment"># merge source branch into the target branch</span>
</code></pre></br>

<p>We will be presented with this message.</p>
<p><strong>Output:</strong></p>
<pre><code class="hljs language-plaintext">Merge branch &#x27;feature&#x27; into main-merge-feature
# Please enter a commit message to explain why this merge is necessary,
# especially if it merges an updated upstream into a topic branch.
#
# Lines starting with &#x27;#&#x27; will be ignored, and an empty message aborts
# the commit.
</code></pre><p>This is the default message when merging. We can just save and close the editor by typing <code>:wq</code> and pressing <code>Enter</code>.</p>
<blockquote>
<p><strong>Note:</strong> <code>:wq</code> is the command (:) to <strong>write</strong> (w) and <strong>quit</strong> (q) in <em>vim</em>—usually the default editor in <em>git</em>.</p>
</blockquote>
</br>

<p>We should see something like this.</p>
<p><strong>Output:</strong></p>
<pre><code class="hljs language-plaintext">Merge made by the &#x27;ort&#x27; strategy.
 document.md | 2 ++
 1 file changed, 2 insertions(+)
 create mode 100644 document.md
</code></pre></br>

<p>Next, we can check the log to see the result.</p>
<pre><code class="hljs language-bash">git <span class="hljs-built_in">log</span> --oneline --graph --all
</code></pre><p><strong>Output:</strong></p>
<pre><code class="hljs language-plaintext">*   8d3108b (HEAD -&gt; main-merge-feature) Merge branch &#x27;feature&#x27; into main-merge-feature
|\
| * 312c2e9 (feature) C
| * a582ce0 B
* | 1fef215 (main) E
* | 8ae69da D
|/
* 16b8f7f A
</code></pre></br>

<p>We can see that the <code>main-merge-feature</code> branch now has the commits from both <code>main</code> and <code>feature</code>. The branches have been merged together.</p>
</br>

<h3>Extra: Using the <code>--parents</code> flag</h3>
<p>Taking a look at the log with the <code>--parents</code> flag, we can see the parents of all the commits.</p>
<pre><code class="hljs language-bash">git <span class="hljs-built_in">log</span> --oneline --graph --all --parents
</code></pre><p><strong>Output:</strong></p>
<pre><code class="hljs language-plaintext">*   8d3108b 1fef215 312c2e9 (HEAD -&gt; main-merge-feature) Merge branch &#x27;feature&#x27; into main-merge-feature
|\
| * 312c2e9 a582ce0 (feature) C
| * a582ce0 16b8f7f B
* | 1fef215 8ae69da (main) E
* | 8ae69da 16b8f7f D
|/
* 16b8f7f A
</code></pre></br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h2>Fast forward merges</h2>
<p>When we have a branch that has diverged from another branch, but the branch we are merging into has not changed since the divergence, we can do a <strong>fast forward merge</strong>.</p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Exercise: Merging a branch into another branch using a fast forward merge</h3>
<blockquote>
<ul>
<li>Switch to the <code>main</code> branch.</li>
<li>Create a new branch <code>feature-two</code> and switch to it.</li>
<li>Create a new document <code>document-two.md</code>.</li>
<li>Add values <code>X</code> and <code>Y</code> to the <code>document-two.md</code>.</li>
<li>Add two commits with messages <code>X</code> and <code>Y</code>.</li>
<li>Merge the <code>feature-two</code> branch into the <code>main</code> branch.</li>
</ul>
</blockquote>
</br>

<p>The branch structure should look like this.</p>
<p><img src="../../images/lessons/git/branch-x-y.svg" alt="Branch feature-two"></p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Solution: Merging a branch into another branch using a fast forward merge</h3>
<pre><code class="hljs language-bash">git switch main             <span class="hljs-comment"># switch to the main branch</span>
git checkout -b feature-two <span class="hljs-comment"># create and switch to the feature-two branch</span>

<span class="hljs-comment"># add X change</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;X&quot;</span> &gt;&gt; document-two.md
git add document-two.md
git commit -m <span class="hljs-string">&quot;X&quot;</span>

<span class="hljs-comment"># add Y change</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Y&quot;</span> &gt;&gt; document-two.md
git add document-two.md
git commit -m <span class="hljs-string">&quot;Y&quot;</span>

git switch main             <span class="hljs-comment"># switch back to the main branch</span>
git merge feature-two       <span class="hljs-comment"># merge the feature-two branch into the main branch</span>
</code></pre><p><strong>Output:</strong></p>
<pre><code class="hljs language-plaintext">Updating 1fef215..562f958
Fast-forward
 document-two.md | 2 ++
 1 file changed, 2 insertions(+)
 create mode 100644 document-two.md
</code></pre></br>

<h3>Observation</h3>
<p>The fast-forward merge happened because the <em><strong>common ancestor</strong></em> of the <code>main</code> and <code>feature-two</code> branches was the <em><strong>tip</strong></em> of the <code>main</code> branch itself.</p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<blockquote>
<p><strong>Cleanup</strong></p>
<p>If you followed the exercises up unti now, you can delete the <code>merge-feature-two</code> and the <code>feature-two</code> branches.</p>
<p>Use <code>git branch -d &lt;branch-name&gt;</code> to delete a branch.</p>
</blockquote>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h2>Git rebase</h2>
<p>Assume we look at the git history and we have the following branches: <code>main</code> and <code>feature</code>.</p>
<p>They should look like this.</p>
<p><img src="../../images/lessons/git/branch-a-b-c-d-e-x-y.svg" alt="Branch feature"></p>
</br>
</br>

<p>By rebasing, we can make the history look like this.</p>
<p><img src="../../images/lessons/git/branch-a-d-e-x-y-b-c.svg" alt="Branch feature"></p>
</br>
</br>

<p>Rebasing is the act of taking the changes from one branch and apply them on top of another branch. Or to the tip, really.</p>
<p>Essentially &quot;rewriting&quot; git history.</p>
<p>This can be useful if we want to keep a clean history, without merge commits. It allows us to apply our changes on top of the latest &quot;reality&quot;.</p>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h2>How rebase works</h2>
<p>Basically, when rebasing this is the flow.</p>
<ol>
<li>Execute <code>git rebase &lt;target-branch&gt;</code>. The branch you are on when running the command is the branch you are rebasing—we call it <code>&lt;current-branch&gt;</code>.</li>
<li>The <code>&lt;target-branch&gt;</code> is checked out.</li>
<li>The commits from <code>&lt;current-branch&gt;</code> are &quot;played&quot; one commit at a time.</li>
<li>When done, the <code>&lt;current-branch&gt;</code> is updated to the latest commit SHA of <code>&lt;target-branch&gt;</code> which now has all the changes from <code>&lt;target-branch&gt;</code> as the base.</li>
</ol>
</br>

<blockquote>
<p><strong>Important</strong></p>
<p>It will lead to complications at some point if you do not understand this flow and what goes on.</p>
</blockquote>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Exercise: Rebase the <code>feature</code> branch with the <code>main</code> branch</h3>
<p>In order to not mess up the history for other exercises, we will create a new branch <code>feature-rebase-main</code> and rebase that branch with the <code>main</code> branch.</p>
<p>Do this first.</p>
<pre><code class="hljs language-bash">git checkout feature
git checkout -b feature-rebase-main
</code></pre></br>

<blockquote>
<ul>
<li>Switch to the <code>feature-rebase-main</code> branch.</li>
<li>Rebase the <code>feature-rebase-main</code> branch with the <code>main</code> branch.</li>
<li>Check the logs to see the result.</li>
</ul>
</blockquote>
</br>

<p><strong>Command reminder:</strong></p>
<pre><code class="hljs language-bash">git rebase &lt;target-branch&gt;  <span class="hljs-comment"># to rebase a branch with the current branch</span>
git <span class="hljs-built_in">log</span>                     <span class="hljs-comment"># to see the logs</span>
</code></pre></br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Solution: Rebase the <code>feature</code> branch with the <code>main</code> branch</h3>
<pre><code class="hljs language-bash">git checkout feature-rebase-main  <span class="hljs-comment"># switch to the current branch</span>
git rebase main  <span class="hljs-comment"># rebase the current branch with the target branch</span>
</code></pre><p>Check the logs to see the result.</p>
<pre><code class="hljs language-bash">git <span class="hljs-built_in">log</span> --oneline --graph --parents
</code></pre></br>

<p><strong>Output:</strong></p>
<pre><code class="hljs language-plaintext">* 109ad4e b12a712 (HEAD -&gt; feature-rebase-main) C
* b12a712 562f958 B
* 562f958 37fb152 (main) Y
* 37fb152 1fef215 X
* 1fef215 8ae69da E
* 8ae69da 16b8f7f D
* 16b8f7f A
</code></pre></br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Observation</h3>
<p>Rebase rewrites the history of the current branch with the missing commits from the target branch. When this is done, rebase actually creates <em><strong>new</strong></em> commits with the same changes, which is why you will see different commit SHAs.</p>
</br>

<blockquote>
<p>Read more about merging vs. rebasing. Especially the section &quot;The golden rule of rebasing&quot;:</p>
<p><a href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing">https://www.atlassian.com/git/tutorials/merging-vs-rebasing</a></p>
</blockquote>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<h3>Pros</h3>
<ul>
<li>Clean history, no merge commits.</li>
</ul>
<h3>Cons</h3>
<ul>
<li>Alters history of a branch. Rewriting history can be dangerous.</li>
<li>If a branch was already on the remote, we need to force push the changes. This can lead to complications if others are working on the same branch.</li>
</ul>
<h3>Warning</h3>
<ul>
<li><strong>Never</strong> rebase a branch that is shared with others.</li>
<li><strong>NEVER CHANGE HISTORY OF A PUBLIC BRANCH</strong>—Meaning, do not change the history of <code>main</code> or whatever branch you are using as the main branch.</li>
<li>You will end up with two branches with the same name, but with different histories, which <em>will</em> lead to merge conflicts and team frustations. <strong>The moment you do this, it breaks everybody.</strong></li>
</ul>
<h2>Rule of thumb here</h2>
<ul>
<li>Always <em><strong>merge</strong></em> on <em>public</em> branches.</li>
<li>Only <em><strong>rebase</strong></em> on <em>private</em> branches.</li>
</ul>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

<p>There is a lot more to learn here, but for the scope of this course, this is enough.</p>
</br>
</br>
</div><div class="lesson-links"><a href="/itu-bds-sdse/lessons/git-basics/branches" class="prev">← Previous</a><a href="/itu-bds-sdse/lessons/git-basics/head-and-reflog" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://github.com/lasselundstenjensen/itu-bds-sdse"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/lasselundstenjensen"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Basics of Git.","title":"Merging","keywords":["Software engineering","Git"]},"html":"\u003ch2\u003eMerging changes\u003c/h2\u003e\n\u003cp\u003eWhat we have done so far is to create a new \u003ccode\u003efeature\u003c/code\u003e branch based on \u003ccode\u003emain\u003c/code\u003e, switch to the \u003ccode\u003efeature\u003c/code\u003ebranch, make some new changes and commit them.\u003c/p\u003e\n\u003c/br\u003e\n\n\u003cp\u003eNow we want to switch back to the \u003ccode\u003emain\u003c/code\u003e branch and add some new changes there.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eExercise: Switch to the \u003ccode\u003emain\u003c/code\u003e branch and make some changes\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eSwitch to the \u003ccode\u003emain\u003c/code\u003e branch.\u003c/li\u003e\n\u003cli\u003eAdd \u003ccode\u003eD\u003c/code\u003eand \u003ccode\u003eE\u003c/code\u003e to the \u003ccode\u003eREADME.md\u003c/code\u003e file the same way as we just added \u003ccode\u003eB\u003c/code\u003e and \u003ccode\u003eC\u003c/code\u003e to the \u003ccode\u003edocument.md\u003c/code\u003e file.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\n\u003cp\u003e\u003cstrong\u003eCommand reminder:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit switch \u0026lt;branch-name\u0026gt;  \u003cspan class=\"hljs-comment\"\u003e# to switch to a branch\u003c/span\u003e\ngit status                \u003cspan class=\"hljs-comment\"\u003e# to see the status of the working directory\u003c/span\u003e\ngit add \u0026lt;file-name\u0026gt;       \u003cspan class=\"hljs-comment\"\u003e# to add a file to the staging area\u003c/span\u003e\ngit commit -m \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;message\u0026gt;\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# to commit the changes\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eSolution: Switch to the \u003ccode\u003emain\u003c/code\u003e branch and make some changes\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit switch main\n\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;D\u0026quot;\u003c/span\u003e \u0026gt;\u0026gt; README.md\ngit add README.md\ngit commit -m \u003cspan class=\"hljs-string\"\u003e\u0026quot;D\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;E\u0026quot;\u003c/span\u003e \u0026gt;\u0026gt; README.md\ngit add README.md\ngit commit -m \u003cspan class=\"hljs-string\"\u003e\u0026quot;E\u0026quot;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cp\u003eIf we run \u003ccode\u003egit log\u003c/code\u003e we should see something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003ecommit 1fef21501625d1cb1ab99318ad0fa8487d6ef5cb (HEAD -\u0026gt; main)\nAuthor: Lasse Lund Sten Jensen \u0026lt;lajl@itu.dk\u0026gt;\nDate:   Fri Sep 20 22:27:19 2024 +0200\n\n    E\n\ncommit 8ae69da5d2938a5fee06207f2c3320a4c5b90a9b\nAuthor: Lasse Lund Sten Jensen \u0026lt;lajl@itu.dk\u0026gt;\nDate:   Fri Sep 20 22:27:06 2024 +0200\n\n    D\n\ncommit 16b8f7f933c4c92b83ebb8602109c84c2d799359\nAuthor: Lasse Lund Sten Jensen \u0026lt;lajl@itu.dk\u0026gt;\nDate:   Fri Sep 20 21:48:09 2024 +0200\n\n    A\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\n\u003cp\u003eWe can see that \u003ccode\u003eD\u003c/code\u003e, \u003ccode\u003eE\u003c/code\u003e, and \u003ccode\u003eA\u003c/code\u003e are all on the \u003ccode\u003emain\u003c/code\u003e branch.\u003c/p\u003e\n\u003cp\u003eThe branches now look like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"../../images/lessons/git/branch-a-b-c-d-e.svg\" alt=\"Branch feature\"\u003e\u003c/p\u003e\n\u003c/br\u003e\n\n\u003cp\u003eThis means the \u003cem\u003ebranches have diverged\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eThey have commits that are unique in both and they have a common ancestor \u003ccode\u003eA\u003c/code\u003e.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch2\u003eGit merge\u003c/h2\u003e\n\u003cp\u003eWhen we have two branches that have diverged, we can merge them back together.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cp\u003eWhen merging we can have two different outcomes—one with a merge commit and one without. Strategy for merging matters here.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eWhat is a merge exactly?\u003c/h3\u003e\n\u003cp\u003eA merge is a way to combine the changes from one branch into another branch. Essentially combining two histories together that have diverged somewhere in the past.\u003c/p\u003e\n\u003cp\u003eAs in our example, where \u003ccode\u003emain\u003c/code\u003e and \u003ccode\u003efeature\u003c/code\u003e have diverged from a shared commit \u003ccode\u003eA\u003c/code\u003e. Here \u003ccode\u003eA\u003c/code\u003e is the \u003cem\u003e\u003cstrong\u003efirst\u003c/strong\u003e common ancestor\u003c/em\u003e. This is also called the \u003cstrong\u003emerge base\u003c/strong\u003e.\u003c/p\u003e\n\u003c/br\u003e\n\n\u003cp\u003eWhen we merge, \u003cstrong\u003egit\u003c/strong\u003e \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ewalks the history of the two branches,\u003c/li\u003e\n\u003cli\u003efinds the merge base, \u003c/li\u003e\n\u003cli\u003echecks out the merge base\u003c/li\u003e\n\u003cli\u003eand \u003cem\u003e\u0026quot;plays\u0026quot; those commits\u003c/em\u003e on top of it,\u003c/li\u003e\n\u003cli\u003eand then creates a new commit with the changes from both branches called the \u003cem\u003e\u003cstrong\u003emerge commit\u003c/strong\u003e\u003c/em\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eA \u003cem\u003emerge commit\u003c/em\u003e has \u003cem\u003etwo parents\u003c/em\u003e. One from the branch we are merging from and one from the branch we are merging to.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch2\u003eMerge\u003c/h2\u003e\n\u003cp\u003eWe have the \u003ccode\u003emerge\u003c/code\u003e command.\u003c/p\u003e\n\u003c/br\u003e\n\n\u003cp\u003eThe branch we are on (i.e. has checked out, with the \u003ccode\u003e*\u003c/code\u003e) is the branch we are merging into, also called the \u003ccode\u003etarget\u003c/code\u003e branch. The branch in \u003ccode\u003e\u0026lt;branch-name\u0026gt;\u003c/code\u003e will be the \u003ccode\u003esource\u003c/code\u003e branch.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cp\u003e\u003cstrong\u003eCommand\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit merge \u0026lt;branch-name\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cblockquote\u003e\n\u003cp\u003eRead more about it in the manual: \u003ccode\u003eman git-merge\u003c/code\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cp\u003eTo merge the \u003ccode\u003efeature\u003c/code\u003e branch into the \u003ccode\u003emain\u003c/code\u003e branch, we can use the \u003ccode\u003emerge\u003c/code\u003e command.\u003c/p\u003e\n\u003cp\u003eHowever, since we will be using this to demonstrate another merge technique, let us first checkout a copy of the \u003ccode\u003emain\u003c/code\u003e branch, so we do not mess up our history.\u003c/p\u003e\n\u003cp\u003eWe call it \u003ccode\u003emain-merge-feature\u003c/code\u003e.\u003c/p\u003e\n\u003c/br\u003e\n\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit checkout -b main-merge-feature\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eExercise: Merge the \u003ccode\u003efeature\u003c/code\u003e branch into the \u003ccode\u003emain-merge-feature\u003c/code\u003e branch using the \u003ccode\u003emerge\u003c/code\u003e command\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eSwitch to the \u003ccode\u003emain-merge-feature\u003c/code\u003e branch, if you are not already on it.\u003c/li\u003e\n\u003cli\u003eMerge the \u003ccode\u003efeature\u003c/code\u003e branch into the \u003ccode\u003emain-merge-feature\u003c/code\u003e branch.\u003c/li\u003e\n\u003cli\u003eCheck the log to see the result.\u003c/li\u003e\n\u003cli\u003e(Extra) Use the \u003ccode\u003e--parents\u003c/code\u003e flag to see the parents of the merge commit.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eCommand reminder:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit switch \u0026lt;branch-name\u0026gt;  \u003cspan class=\"hljs-comment\"\u003e# to switch to a branch\u003c/span\u003e\ngit merge \u0026lt;branch-name\u0026gt;   \u003cspan class=\"hljs-comment\"\u003e# to merge a branch into the current branch\u003c/span\u003e\ngit \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e                   \u003cspan class=\"hljs-comment\"\u003e# to see the logs\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eSolution: Merge the \u003ccode\u003efeature\u003c/code\u003e branch into the \u003ccode\u003emain-merge-feature\u003c/code\u003e branch using the \u003ccode\u003emerge\u003c/code\u003e command\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit switch main-merge-feature \u003cspan class=\"hljs-comment\"\u003e# switch to the target branch\u003c/span\u003e\ngit merge feature             \u003cspan class=\"hljs-comment\"\u003e# merge source branch into the target branch\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\n\u003cp\u003eWe will be presented with this message.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eOutput:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003eMerge branch \u0026#x27;feature\u0026#x27; into main-merge-feature\n# Please enter a commit message to explain why this merge is necessary,\n# especially if it merges an updated upstream into a topic branch.\n#\n# Lines starting with \u0026#x27;#\u0026#x27; will be ignored, and an empty message aborts\n# the commit.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis is the default message when merging. We can just save and close the editor by typing \u003ccode\u003e:wq\u003c/code\u003e and pressing \u003ccode\u003eEnter\u003c/code\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eNote:\u003c/strong\u003e \u003ccode\u003e:wq\u003c/code\u003e is the command (:) to \u003cstrong\u003ewrite\u003c/strong\u003e (w) and \u003cstrong\u003equit\u003c/strong\u003e (q) in \u003cem\u003evim\u003c/em\u003e—usually the default editor in \u003cem\u003egit\u003c/em\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\n\u003cp\u003eWe should see something like this.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eOutput:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003eMerge made by the \u0026#x27;ort\u0026#x27; strategy.\n document.md | 2 ++\n 1 file changed, 2 insertions(+)\n create mode 100644 document.md\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\n\u003cp\u003eNext, we can check the log to see the result.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e --oneline --graph --all\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eOutput:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003e*   8d3108b (HEAD -\u0026gt; main-merge-feature) Merge branch \u0026#x27;feature\u0026#x27; into main-merge-feature\n|\\\n| * 312c2e9 (feature) C\n| * a582ce0 B\n* | 1fef215 (main) E\n* | 8ae69da D\n|/\n* 16b8f7f A\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\n\u003cp\u003eWe can see that the \u003ccode\u003emain-merge-feature\u003c/code\u003e branch now has the commits from both \u003ccode\u003emain\u003c/code\u003e and \u003ccode\u003efeature\u003c/code\u003e. The branches have been merged together.\u003c/p\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eExtra: Using the \u003ccode\u003e--parents\u003c/code\u003e flag\u003c/h3\u003e\n\u003cp\u003eTaking a look at the log with the \u003ccode\u003e--parents\u003c/code\u003e flag, we can see the parents of all the commits.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e --oneline --graph --all --parents\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eOutput:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003e*   8d3108b 1fef215 312c2e9 (HEAD -\u0026gt; main-merge-feature) Merge branch \u0026#x27;feature\u0026#x27; into main-merge-feature\n|\\\n| * 312c2e9 a582ce0 (feature) C\n| * a582ce0 16b8f7f B\n* | 1fef215 8ae69da (main) E\n* | 8ae69da 16b8f7f D\n|/\n* 16b8f7f A\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch2\u003eFast forward merges\u003c/h2\u003e\n\u003cp\u003eWhen we have a branch that has diverged from another branch, but the branch we are merging into has not changed since the divergence, we can do a \u003cstrong\u003efast forward merge\u003c/strong\u003e.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eExercise: Merging a branch into another branch using a fast forward merge\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eSwitch to the \u003ccode\u003emain\u003c/code\u003e branch.\u003c/li\u003e\n\u003cli\u003eCreate a new branch \u003ccode\u003efeature-two\u003c/code\u003e and switch to it.\u003c/li\u003e\n\u003cli\u003eCreate a new document \u003ccode\u003edocument-two.md\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eAdd values \u003ccode\u003eX\u003c/code\u003e and \u003ccode\u003eY\u003c/code\u003e to the \u003ccode\u003edocument-two.md\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eAdd two commits with messages \u003ccode\u003eX\u003c/code\u003e and \u003ccode\u003eY\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eMerge the \u003ccode\u003efeature-two\u003c/code\u003e branch into the \u003ccode\u003emain\u003c/code\u003e branch.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\n\u003cp\u003eThe branch structure should look like this.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"../../images/lessons/git/branch-x-y.svg\" alt=\"Branch feature-two\"\u003e\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eSolution: Merging a branch into another branch using a fast forward merge\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit switch main             \u003cspan class=\"hljs-comment\"\u003e# switch to the main branch\u003c/span\u003e\ngit checkout -b feature-two \u003cspan class=\"hljs-comment\"\u003e# create and switch to the feature-two branch\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# add X change\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;X\u0026quot;\u003c/span\u003e \u0026gt;\u0026gt; document-two.md\ngit add document-two.md\ngit commit -m \u003cspan class=\"hljs-string\"\u003e\u0026quot;X\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# add Y change\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Y\u0026quot;\u003c/span\u003e \u0026gt;\u0026gt; document-two.md\ngit add document-two.md\ngit commit -m \u003cspan class=\"hljs-string\"\u003e\u0026quot;Y\u0026quot;\u003c/span\u003e\n\ngit switch main             \u003cspan class=\"hljs-comment\"\u003e# switch back to the main branch\u003c/span\u003e\ngit merge feature-two       \u003cspan class=\"hljs-comment\"\u003e# merge the feature-two branch into the main branch\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eOutput:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003eUpdating 1fef215..562f958\nFast-forward\n document-two.md | 2 ++\n 1 file changed, 2 insertions(+)\n create mode 100644 document-two.md\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\n\u003ch3\u003eObservation\u003c/h3\u003e\n\u003cp\u003eThe fast-forward merge happened because the \u003cem\u003e\u003cstrong\u003ecommon ancestor\u003c/strong\u003e\u003c/em\u003e of the \u003ccode\u003emain\u003c/code\u003e and \u003ccode\u003efeature-two\u003c/code\u003e branches was the \u003cem\u003e\u003cstrong\u003etip\u003c/strong\u003e\u003c/em\u003e of the \u003ccode\u003emain\u003c/code\u003e branch itself.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eCleanup\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eIf you followed the exercises up unti now, you can delete the \u003ccode\u003emerge-feature-two\u003c/code\u003e and the \u003ccode\u003efeature-two\u003c/code\u003e branches.\u003c/p\u003e\n\u003cp\u003eUse \u003ccode\u003egit branch -d \u0026lt;branch-name\u0026gt;\u003c/code\u003e to delete a branch.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch2\u003eGit rebase\u003c/h2\u003e\n\u003cp\u003eAssume we look at the git history and we have the following branches: \u003ccode\u003emain\u003c/code\u003e and \u003ccode\u003efeature\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThey should look like this.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"../../images/lessons/git/branch-a-b-c-d-e-x-y.svg\" alt=\"Branch feature\"\u003e\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cp\u003eBy rebasing, we can make the history look like this.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"../../images/lessons/git/branch-a-d-e-x-y-b-c.svg\" alt=\"Branch feature\"\u003e\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cp\u003eRebasing is the act of taking the changes from one branch and apply them on top of another branch. Or to the tip, really.\u003c/p\u003e\n\u003cp\u003eEssentially \u0026quot;rewriting\u0026quot; git history.\u003c/p\u003e\n\u003cp\u003eThis can be useful if we want to keep a clean history, without merge commits. It allows us to apply our changes on top of the latest \u0026quot;reality\u0026quot;.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch2\u003eHow rebase works\u003c/h2\u003e\n\u003cp\u003eBasically, when rebasing this is the flow.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eExecute \u003ccode\u003egit rebase \u0026lt;target-branch\u0026gt;\u003c/code\u003e. The branch you are on when running the command is the branch you are rebasing—we call it \u003ccode\u003e\u0026lt;current-branch\u0026gt;\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003e\u0026lt;target-branch\u0026gt;\u003c/code\u003e is checked out.\u003c/li\u003e\n\u003cli\u003eThe commits from \u003ccode\u003e\u0026lt;current-branch\u0026gt;\u003c/code\u003e are \u0026quot;played\u0026quot; one commit at a time.\u003c/li\u003e\n\u003cli\u003eWhen done, the \u003ccode\u003e\u0026lt;current-branch\u0026gt;\u003c/code\u003e is updated to the latest commit SHA of \u003ccode\u003e\u0026lt;target-branch\u0026gt;\u003c/code\u003e which now has all the changes from \u003ccode\u003e\u0026lt;target-branch\u0026gt;\u003c/code\u003e as the base.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/br\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eImportant\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eIt will lead to complications at some point if you do not understand this flow and what goes on.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eExercise: Rebase the \u003ccode\u003efeature\u003c/code\u003e branch with the \u003ccode\u003emain\u003c/code\u003e branch\u003c/h3\u003e\n\u003cp\u003eIn order to not mess up the history for other exercises, we will create a new branch \u003ccode\u003efeature-rebase-main\u003c/code\u003e and rebase that branch with the \u003ccode\u003emain\u003c/code\u003e branch.\u003c/p\u003e\n\u003cp\u003eDo this first.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit checkout feature\ngit checkout -b feature-rebase-main\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eSwitch to the \u003ccode\u003efeature-rebase-main\u003c/code\u003e branch.\u003c/li\u003e\n\u003cli\u003eRebase the \u003ccode\u003efeature-rebase-main\u003c/code\u003e branch with the \u003ccode\u003emain\u003c/code\u003e branch.\u003c/li\u003e\n\u003cli\u003eCheck the logs to see the result.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\n\u003cp\u003e\u003cstrong\u003eCommand reminder:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit rebase \u0026lt;target-branch\u0026gt;  \u003cspan class=\"hljs-comment\"\u003e# to rebase a branch with the current branch\u003c/span\u003e\ngit \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e                     \u003cspan class=\"hljs-comment\"\u003e# to see the logs\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eSolution: Rebase the \u003ccode\u003efeature\u003c/code\u003e branch with the \u003ccode\u003emain\u003c/code\u003e branch\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit checkout feature-rebase-main  \u003cspan class=\"hljs-comment\"\u003e# switch to the current branch\u003c/span\u003e\ngit rebase main  \u003cspan class=\"hljs-comment\"\u003e# rebase the current branch with the target branch\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eCheck the logs to see the result.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e --oneline --graph --parents\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\n\u003cp\u003e\u003cstrong\u003eOutput:\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003e* 109ad4e b12a712 (HEAD -\u0026gt; feature-rebase-main) C\n* b12a712 562f958 B\n* 562f958 37fb152 (main) Y\n* 37fb152 1fef215 X\n* 1fef215 8ae69da E\n* 8ae69da 16b8f7f D\n* 16b8f7f A\n\u003c/code\u003e\u003c/pre\u003e\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003eObservation\u003c/h3\u003e\n\u003cp\u003eRebase rewrites the history of the current branch with the missing commits from the target branch. When this is done, rebase actually creates \u003cem\u003e\u003cstrong\u003enew\u003c/strong\u003e\u003c/em\u003e commits with the same changes, which is why you will see different commit SHAs.\u003c/p\u003e\n\u003c/br\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eRead more about merging vs. rebasing. Especially the section \u0026quot;The golden rule of rebasing\u0026quot;:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.atlassian.com/git/tutorials/merging-vs-rebasing\"\u003ehttps://www.atlassian.com/git/tutorials/merging-vs-rebasing\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003ch3\u003ePros\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eClean history, no merge commits.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eCons\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eAlters history of a branch. Rewriting history can be dangerous.\u003c/li\u003e\n\u003cli\u003eIf a branch was already on the remote, we need to force push the changes. This can lead to complications if others are working on the same branch.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eWarning\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNever\u003c/strong\u003e rebase a branch that is shared with others.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNEVER CHANGE HISTORY OF A PUBLIC BRANCH\u003c/strong\u003e—Meaning, do not change the history of \u003ccode\u003emain\u003c/code\u003e or whatever branch you are using as the main branch.\u003c/li\u003e\n\u003cli\u003eYou will end up with two branches with the same name, but with different histories, which \u003cem\u003ewill\u003c/em\u003e lead to merge conflicts and team frustations. \u003cstrong\u003eThe moment you do this, it breaks everybody.\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eRule of thumb here\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eAlways \u003cem\u003e\u003cstrong\u003emerge\u003c/strong\u003e\u003c/em\u003e on \u003cem\u003epublic\u003c/em\u003e branches.\u003c/li\u003e\n\u003cli\u003eOnly \u003cem\u003e\u003cstrong\u003erebase\u003c/strong\u003e\u003c/em\u003e on \u003cem\u003eprivate\u003c/em\u003e branches.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003cp\u003eThere is a lot more to learn here, but for the scope of this course, this is enough.\u003c/p\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n","markdown":"\n## Merging changes\n\nWhat we have done so far is to create a new `feature` branch based on `main`, switch to the `feature`branch, make some new changes and commit them.\n\n\u003c/br\u003e\n\nNow we want to switch back to the `main` branch and add some new changes there.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Exercise: Switch to the `main` branch and make some changes\n\n\u003e * Switch to the `main` branch.\n\u003e * Add `D`and `E` to the `README.md` file the same way as we just added `B` and `C` to the `document.md` file.\n\n\u003c/br\u003e\n\n**Command reminder:**\n\n```bash\ngit switch \u003cbranch-name\u003e  # to switch to a branch\ngit status                # to see the status of the working directory\ngit add \u003cfile-name\u003e       # to add a file to the staging area\ngit commit -m \"\u003cmessage\u003e\" # to commit the changes\n```\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Solution: Switch to the `main` branch and make some changes\n\n```bash\ngit switch main\n\necho \"D\" \u003e\u003e README.md\ngit add README.md\ngit commit -m \"D\"\n\necho \"E\" \u003e\u003e README.md\ngit add README.md\ngit commit -m \"E\"\n```\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\nIf we run `git log` we should see something like this:\n\n```plaintext\ncommit 1fef21501625d1cb1ab99318ad0fa8487d6ef5cb (HEAD -\u003e main)\nAuthor: Lasse Lund Sten Jensen \u003clajl@itu.dk\u003e\nDate:   Fri Sep 20 22:27:19 2024 +0200\n\n    E\n\ncommit 8ae69da5d2938a5fee06207f2c3320a4c5b90a9b\nAuthor: Lasse Lund Sten Jensen \u003clajl@itu.dk\u003e\nDate:   Fri Sep 20 22:27:06 2024 +0200\n\n    D\n\ncommit 16b8f7f933c4c92b83ebb8602109c84c2d799359\nAuthor: Lasse Lund Sten Jensen \u003clajl@itu.dk\u003e\nDate:   Fri Sep 20 21:48:09 2024 +0200\n\n    A\n```\n\n\u003c/br\u003e\n\nWe can see that `D`, `E`, and `A` are all on the `main` branch.\n\nThe branches now look like this:\n\n![Branch feature](../../images/lessons/git/branch-a-b-c-d-e.svg)\n\n\u003c/br\u003e\n\nThis means the _branches have diverged_.\n\nThey have commits that are unique in both and they have a common ancestor `A`.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n## Git merge\n\nWhen we have two branches that have diverged, we can merge them back together.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\nWhen merging we can have two different outcomes—one with a merge commit and one without. Strategy for merging matters here.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### What is a merge exactly?\n\nA merge is a way to combine the changes from one branch into another branch. Essentially combining two histories together that have diverged somewhere in the past.\n\nAs in our example, where `main` and `feature` have diverged from a shared commit `A`. Here `A` is the ***first** common ancestor*. This is also called the **merge base**.\n\n\u003c/br\u003e\n\nWhen we merge, **git** \n- walks the history of the two branches,\n- finds the merge base, \n- checks out the merge base\n- and *\"plays\" those commits* on top of it,\n- and then creates a new commit with the changes from both branches called the ***merge commit***.\n\nA *merge commit* has *two parents*. One from the branch we are merging from and one from the branch we are merging to.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n## Merge\n\nWe have the `merge` command.\n\n\u003c/br\u003e\n\nThe branch we are on (i.e. has checked out, with the `*`) is the branch we are merging into, also called the `target` branch. The branch in `\u003cbranch-name\u003e` will be the `source` branch.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\n**Command**\n\n```bash\ngit merge \u003cbranch-name\u003e\n```\n\n\u003e Read more about it in the manual: `man git-merge`\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\nTo merge the `feature` branch into the `main` branch, we can use the `merge` command.\n\nHowever, since we will be using this to demonstrate another merge technique, let us first checkout a copy of the `main` branch, so we do not mess up our history.\n\nWe call it `main-merge-feature`.\n\n\u003c/br\u003e\n\n```bash\ngit checkout -b main-merge-feature\n```\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Exercise: Merge the `feature` branch into the `main-merge-feature` branch using the `merge` command\n\n\u003e * Switch to the `main-merge-feature` branch, if you are not already on it.\n\u003e * Merge the `feature` branch into the `main-merge-feature` branch.\n\u003e * Check the log to see the result.\n\u003e * (Extra) Use the `--parents` flag to see the parents of the merge commit.\n\n**Command reminder:**\n\n```bash\ngit switch \u003cbranch-name\u003e  # to switch to a branch\ngit merge \u003cbranch-name\u003e   # to merge a branch into the current branch\ngit log                   # to see the logs\n```\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Solution: Merge the `feature` branch into the `main-merge-feature` branch using the `merge` command\n\n```bash\ngit switch main-merge-feature # switch to the target branch\ngit merge feature             # merge source branch into the target branch\n```\n\n\u003c/br\u003e\n\nWe will be presented with this message.\n\n**Output:**\n\n```plaintext\nMerge branch 'feature' into main-merge-feature\n# Please enter a commit message to explain why this merge is necessary,\n# especially if it merges an updated upstream into a topic branch.\n#\n# Lines starting with '#' will be ignored, and an empty message aborts\n# the commit.\n```\n\nThis is the default message when merging. We can just save and close the editor by typing `:wq` and pressing `Enter`.\n\n\u003e **Note:** `:wq` is the command (:) to **write** (w) and **quit** (q) in *vim*—usually the default editor in *git*.\n\n\u003c/br\u003e\n\nWe should see something like this.\n\n**Output:**\n\n```plaintext\nMerge made by the 'ort' strategy.\n document.md | 2 ++\n 1 file changed, 2 insertions(+)\n create mode 100644 document.md\n```\n\n\u003c/br\u003e\n\nNext, we can check the log to see the result.\n\n```bash\ngit log --oneline --graph --all\n```\n\n**Output:**\n\n```plaintext\n*   8d3108b (HEAD -\u003e main-merge-feature) Merge branch 'feature' into main-merge-feature\n|\\\n| * 312c2e9 (feature) C\n| * a582ce0 B\n* | 1fef215 (main) E\n* | 8ae69da D\n|/\n* 16b8f7f A\n```\n\n\u003c/br\u003e\n\nWe can see that the `main-merge-feature` branch now has the commits from both `main` and `feature`. The branches have been merged together.\n\n\u003c/br\u003e\n\n### Extra: Using the `--parents` flag\n\nTaking a look at the log with the `--parents` flag, we can see the parents of all the commits.\n\n```bash\ngit log --oneline --graph --all --parents\n```\n\n**Output:**\n\n```plaintext\n*   8d3108b 1fef215 312c2e9 (HEAD -\u003e main-merge-feature) Merge branch 'feature' into main-merge-feature\n|\\\n| * 312c2e9 a582ce0 (feature) C\n| * a582ce0 16b8f7f B\n* | 1fef215 8ae69da (main) E\n* | 8ae69da 16b8f7f D\n|/\n* 16b8f7f A\n```\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n## Fast forward merges\n\nWhen we have a branch that has diverged from another branch, but the branch we are merging into has not changed since the divergence, we can do a **fast forward merge**.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Exercise: Merging a branch into another branch using a fast forward merge\n\n\u003e * Switch to the `main` branch.\n\u003e * Create a new branch `feature-two` and switch to it.\n\u003e * Create a new document `document-two.md`.\n\u003e * Add values `X` and `Y` to the `document-two.md`.\n\u003e * Add two commits with messages `X` and `Y`.\n\u003e * Merge the `feature-two` branch into the `main` branch.\n\n\u003c/br\u003e\n\nThe branch structure should look like this.\n\n![Branch feature-two](../../images/lessons/git/branch-x-y.svg)\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Solution: Merging a branch into another branch using a fast forward merge\n\n```bash\ngit switch main             # switch to the main branch\ngit checkout -b feature-two # create and switch to the feature-two branch\n\n# add X change\necho \"X\" \u003e\u003e document-two.md\ngit add document-two.md\ngit commit -m \"X\"\n\n# add Y change\necho \"Y\" \u003e\u003e document-two.md\ngit add document-two.md\ngit commit -m \"Y\"\n\ngit switch main             # switch back to the main branch\ngit merge feature-two       # merge the feature-two branch into the main branch\n```\n\n**Output:**\n\n```plaintext\nUpdating 1fef215..562f958\nFast-forward\n document-two.md | 2 ++\n 1 file changed, 2 insertions(+)\n create mode 100644 document-two.md\n```\n\n\u003c/br\u003e\n\n### Observation\n\nThe fast-forward merge happened because the ***common ancestor*** of the `main` and `feature-two` branches was the ***tip*** of the `main` branch itself.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n\u003e **Cleanup**\n\u003e \n\u003e If you followed the exercises up unti now, you can delete the `merge-feature-two` and the `feature-two` branches.\n\u003e\n\u003e Use `git branch -d \u003cbranch-name\u003e` to delete a branch.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n## Git rebase\n\nAssume we look at the git history and we have the following branches: `main` and `feature`.\n\nThey should look like this.\n\n![Branch feature](../../images/lessons/git/branch-a-b-c-d-e-x-y.svg)\n\n\u003c/br\u003e\n\u003c/br\u003e\n\nBy rebasing, we can make the history look like this.\n\n![Branch feature](../../images/lessons/git/branch-a-d-e-x-y-b-c.svg)\n\n\u003c/br\u003e\n\u003c/br\u003e\n\nRebasing is the act of taking the changes from one branch and apply them on top of another branch. Or to the tip, really.\n\nEssentially \"rewriting\" git history.\n\nThis can be useful if we want to keep a clean history, without merge commits. It allows us to apply our changes on top of the latest \"reality\".\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n## How rebase works\n\nBasically, when rebasing this is the flow.\n\n1. Execute `git rebase \u003ctarget-branch\u003e`. The branch you are on when running the command is the branch you are rebasing—we call it `\u003ccurrent-branch\u003e`.\n2. The `\u003ctarget-branch\u003e` is checked out.\n3. The commits from `\u003ccurrent-branch\u003e` are \"played\" one commit at a time.\n4. When done, the `\u003ccurrent-branch\u003e` is updated to the latest commit SHA of `\u003ctarget-branch\u003e` which now has all the changes from `\u003ctarget-branch\u003e` as the base.\n\n\u003c/br\u003e\n\n\u003e **Important**\n\u003e\n\u003e It will lead to complications at some point if you do not understand this flow and what goes on.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Exercise: Rebase the `feature` branch with the `main` branch\n\nIn order to not mess up the history for other exercises, we will create a new branch `feature-rebase-main` and rebase that branch with the `main` branch.\n\nDo this first.\n\n```bash\ngit checkout feature\ngit checkout -b feature-rebase-main\n```\n\n\u003c/br\u003e\n\n\u003e * Switch to the `feature-rebase-main` branch.\n\u003e * Rebase the `feature-rebase-main` branch with the `main` branch.\n\u003e * Check the logs to see the result.\n\n\u003c/br\u003e\n\n**Command reminder:**\n\n```bash\ngit rebase \u003ctarget-branch\u003e  # to rebase a branch with the current branch\ngit log                     # to see the logs\n```\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Solution: Rebase the `feature` branch with the `main` branch\n\n```bash\ngit checkout feature-rebase-main  # switch to the current branch\ngit rebase main  # rebase the current branch with the target branch\n```\n\nCheck the logs to see the result.\n\n```bash\ngit log --oneline --graph --parents\n```\n\n\u003c/br\u003e\n\n**Output:**\n\n```plaintext\n* 109ad4e b12a712 (HEAD -\u003e feature-rebase-main) C\n* b12a712 562f958 B\n* 562f958 37fb152 (main) Y\n* 37fb152 1fef215 X\n* 1fef215 8ae69da E\n* 8ae69da 16b8f7f D\n* 16b8f7f A\n```\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Observation\n\nRebase rewrites the history of the current branch with the missing commits from the target branch. When this is done, rebase actually creates ***new*** commits with the same changes, which is why you will see different commit SHAs.\n\n\u003c/br\u003e\n\n\u003e Read more about merging vs. rebasing. Especially the section \"The golden rule of rebasing\":\n\u003e \n\u003e [https://www.atlassian.com/git/tutorials/merging-vs-rebasing](https://www.atlassian.com/git/tutorials/merging-vs-rebasing)\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\n### Pros\n\n- Clean history, no merge commits.\n\n### Cons\n\n- Alters history of a branch. Rewriting history can be dangerous.\n- If a branch was already on the remote, we need to force push the changes. This can lead to complications if others are working on the same branch.\n\n### Warning\n\n- **Never** rebase a branch that is shared with others.\n- **NEVER CHANGE HISTORY OF A PUBLIC BRANCH**—Meaning, do not change the history of `main` or whatever branch you are using as the main branch.\n- You will end up with two branches with the same name, but with different histories, which _will_ lead to merge conflicts and team frustations. **The moment you do this, it breaks everybody.**\n\n## Rule of thumb here\n\n- Always ***merge*** on *public* branches.\n- Only ***rebase*** on *private* branches.\n\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\u003c/br\u003e\n\nThere is a lot more to learn here, but for the scope of this course, this is enough.\n\n\u003c/br\u003e\n\u003c/br\u003e\n","slug":"merging","title":"Merging","section":"Git basics","icon":"code","filePath":"/home/runner/work/itu-bds-sdse/itu-bds-sdse/lessons/06-git-basics/F-merging.md","nextSlug":"/itu-bds-sdse/lessons/git-basics/head-and-reflog","prevSlug":"/itu-bds-sdse/lessons/git-basics/branches"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"git-basics","slug":"merging"},"buildId":"2uTetOH5G6p8P6C8WtCZW","assetPrefix":"/itu-bds-sdse","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>